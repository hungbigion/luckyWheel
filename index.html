<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>


    <title>V√≤ng Quay May M·∫Øn</title>
 
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: url('background.jpg') no-repeat center center/cover;
            font-family: Arial, sans-serif;
            color: white;
            text-align: center;
            padding: 10px;
        }

        .form-container {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
            width: 90%; /* Chi·ªÅu r·ªông linh ho·∫°t */
            max-width: 350px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .form-container label {
            font-size: 14px;
            display: flex;
            flex-direction: column;
            text-align: left;
        }

        .form-container input {
            width: 95%;
            padding: 10px;
            border: 1px solid #00aaff;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 8px;
            outline: none;
        }

        .form-container input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .form-container button {
            background: linear-gradient(45deg, #0044cc, #0088ff);
            border: none;
            color: white;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            box-shadow: 0 0 10px rgba(0, 170, 255, 0.5);
            transition: 0.3s;
        }

        .form-container button:hover {
            background: linear-gradient(45deg, #0022aa, #0066ff);
            box-shadow: 0 0 20px rgba(0, 170, 255, 0.8);
        }

        .wheel-container, .result-container {
            display: none;
        }
        .wheel-container{
            width: 80vw; /* Co gi√£n theo m√†n h√¨nh */
            max-width: 360px; 
            height: auto;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        #wheelCanvas {
            width: 100%;
            height: auto;
            display: block;
            margin: auto;
            transform-origin: center center;
            filter: drop-shadow(0px 0px 10px rgba(0, 191, 255, 0.8)); /* Hi·ªáu ·ª©ng ph√°t s√°ng */
        }
        .spin-button {
            position: absolute;
            top: 46%;
            left: 50%;
            width: 100px; /* K√≠ch th∆∞·ªõc n√∫t */
            height: 100px;
            border: none;
            background: url('buttontam.png') no-repeat center center / cover; /* H√¨nh ·∫£nh n√∫t */
            border-radius: 50%;
            cursor: pointer;
            transform: translate(-50%, -50%); /* CƒÉn gi·ªØa tuy·ªát ƒë·ªëi */
        }

.spin-button:hover {
    transform: translate(-50%, -50%) scale(1.1);
}
/* üåü N·ªÅn xanh ƒë·∫≠m + Hi·ªáu ·ª©ng √°nh s√°ng */
.result-container {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: radial-gradient(circle at center, rgba(11, 108, 254, 0.8), rgba(0, 0, 50, 0.9));
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: white;
}
@media screen and (max-width: 480px) {
    .result-container {
        padding-top: 30%;
    }
}

/* üéâ Ch·ªØ "QU√Ä CH·∫§T LI·ªÄN TAY" */
.congrats-text {
    font-size: 30px;
    font-weight: bold;
    text-transform: uppercase;
    text-shadow: 0px 0px 15px rgba(255, 255, 255, 0.8);
}

/* üèÜ H√¨nh ·∫£nh ph·∫ßn th∆∞·ªüng */
.prize-image {
    width: 250px;
    margin: 15px 0;
    filter: drop-shadow(0px 0px 10px rgba(255, 255, 255, 0.7));
}

/* ü•á H·∫°ng ph·∫ßn th∆∞·ªüng */
.prize-rank {
    font-size: 20px;
    font-weight: bold;
    text-transform: uppercase;
    text-shadow: 0px 0px 10px rgba(255, 255, 255, 0.7);
}

/* üéÅ T√™n ph·∫ßn th∆∞·ªüng */
.prize-name {
    font-size: 20px;
    color: #FFD700; /* M√†u v√†ng */
    font-weight: bold;
    text-shadow: 0px 0px 10px rgba(255, 215, 0, 0.7);
}

/* üîò N√∫t "QUAY TI·∫æP" c√≥ hi·ªáu ·ª©ng ph√°t s√°ng */
.continue-btn {
    margin-top: 20px;
    padding: 12px 30px;
    font-size: 18px;
    font-weight: bold;
    color: white;
    background: linear-gradient(145deg, #0044cc, #0080ff);
    border: 1px solid yellow;
    border-radius: 30px;
    box-shadow: 0px 0px 15px rgba(0, 102, 255, 0.9);
    cursor: pointer;
    transition: 0.3s;
}

.continue-btn:hover {
    box-shadow: 0px 0px 20px rgba(0, 102, 255, 1);
    transform: scale(1.05);
}
</style>
</head>
<body>
    <audio id="backgroundMusic" loop>
        <source src="musicBG.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>
    <audio id="celebrationSound">
        <source src="congratulations.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>
    <div class="form-container" id="formContainer">
        <label>H·ªç & T√™n: <input type="text" id="name" placeholder="Nh·∫≠p h·ªç t√™n"></label>
        <label>S·ªë ƒëi·ªán tho·∫°i: <input type="text" id="phone" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i"></label>
        <label>S·ªë lon bia: <input type="number" id="cans" placeholder="Nh·∫≠p s·ªë l∆∞·ª£ng lon bia"></label>
        <button onclick="startGame()">X√ÅC NH·∫¨N</button>
    </div>

    <div class="wheel-container" id="wheelContainer">
        <canvas id="wheelCanvas" width="300" height="300"></canvas>
        <div class="pointer"></div>
        <button class="spin-button" onclick="spinWheel()"></button>
    </div>

    <div class="result-container" id="resultContainer">
        <h1 class="congrats-text">QU√Ä CH·∫§T LI·ªÄN TAY</h1>
        <img id="prizeImage" class="prize-image" src="" alt="Ph·∫ßn th∆∞·ªüng">
        <p id="prizeRank" class="prize-rank"></p>
        <p id="prizeName" class="prize-name"></p>
        <button class="continue-btn" onclick="restartGame()">QUAY TI·∫æP</button>
    </div>
    

    <script>
       window.onload = function () {
        // Ch·ªù m·ªôt ch√∫t tr∆∞·ªõc khi ph√°t nh·∫°c
        setTimeout(function() {
            document.getElementById('backgroundMusic').play();
        }, 100); // Ch·ªù 100ms tr∆∞·ªõc khi ph√°t nh·∫°c

        document.getElementById('resultContainer').style.display = 'none';
    };
const canvas = document.getElementById('wheelCanvas');
        const ctx = canvas.getContext('2d');
        const sections = [
            { rank: 'GI·∫¢I NH·∫§T', img: 'iphone.png', name: 'iPhone 16' },
            { rank: 'GI·∫¢I NH√å', img: 'loajbl.png', name: 'Loa JBL' },
            { rank: 'GI·∫¢I BA', img: 'smartwatch.png', name: 'SmartWatch' }
        ];
        let currentRotation = 0;
        
        function drawWheel() {
            const canvas = document.getElementById("wheelCanvas");
            const ctx = canvas.getContext("2d");

            // C·∫≠p nh·∫≠t k√≠ch th∆∞·ªõc canvas l·ªõn h∆°n ƒë·ªÉ c√≥ kho·∫£ng tr·ªëng cho vi·ªÅn
            const canvasSize = 360;  // K√≠ch th∆∞·ªõc m·ªõi ƒë·ªÉ c√≥ vi·ªÅn ƒë·∫πp
            canvas.width = canvasSize;
            canvas.height = canvasSize;
            
            const centerX = canvasSize / 2;
            const centerY = canvasSize / 2;
            const outerRadius = 170; // B√°n k√≠nh vi·ªÅn ngo√†i
            const innerRadius = 150; // B√°n k√≠nh v√≤ng quay ch√≠nh
            const angle = (2 * Math.PI) / sections.length;

            // **T·∫°o hi·ªáu ·ª©ng vi·ªÅn gi·ªëng ·ªëng v·ªõi √°nh s√°ng trung t√¢m**
            const gradient = ctx.createRadialGradient(centerX, centerY, 50, centerX, centerY, outerRadius);
            gradient.addColorStop(0, "#A0D8FF");  // Xanh d∆∞∆°ng s√°ng (trung t√¢m)
            gradient.addColorStop(0.5, "#1E90FF"); // Xanh d∆∞∆°ng trung b√¨nh
            gradient.addColorStop(1, "#0044CC");  // Xanh d∆∞∆°ng ƒë·∫≠m (ngo√†i c√πng)

            // **V·∫Ω vi·ªÅn ngo√†i v·ªõi hi·ªáu ·ª©ng ·ªëng**
            ctx.beginPath();
            ctx.arc(centerX, centerY, outerRadius, 0, 2 * Math.PI);
            ctx.fillStyle = gradient;
            ctx.fill();

            // **Th√™m vi·ªÅn highlight ƒë·ªÉ t·∫°o hi·ªáu ·ª©ng √°nh s√°ng**
            ctx.beginPath();
            ctx.arc(centerX, centerY, outerRadius - 2, 0, 2 * Math.PI);
            ctx.strokeStyle = "rgba(255, 255, 255, 0.6)"; // Vi·ªÅn s√°ng nh·∫π
            ctx.lineWidth = 3;
            ctx.stroke();

            // **V·∫Ω c√°c ph·∫ßn th∆∞·ªüng b√™n trong v√≤ng quay**
            sections.forEach((section, i) => {
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, innerRadius, i * angle, (i + 1) * angle);
                ctx.fillStyle = `hsl(220, 100%, ${70 - i * 10}%)`;
                ctx.fill();
                ctx.save();
                
                ctx.translate(centerX, centerY);
                ctx.rotate(i * angle + angle / 2 + Math.PI / 2);
                
                // **Rank - M√†u tr·∫Øng**
                ctx.fillStyle = '#FFFFFF'; 
                ctx.font = 'bold 15px Helvetica';
                ctx.textAlign = 'center';
                ctx.fillText(section.rank, 0, -120);
                
                // **H√¨nh ·∫£nh ph·∫ßn th∆∞·ªüng**
                const img = new Image();
                img.src = section.img;
                img.onload = () => {
                    ctx.save();
                    ctx.translate(centerX, centerY);
                    ctx.rotate(i * angle + angle / 2 + Math.PI / 2);
                    ctx.drawImage(img, -25, -120, 50, 50);
                    ctx.restore();
                };

                // **Name - M√†u v√†ng**
                ctx.fillStyle = '#FFD700'; 
                ctx.font = '14px Verdana';
                ctx.fillText(section.name, 0, -50);
                
                ctx.restore();
            });
        }



        
        function startGame() {
            document.getElementById('backgroundMusic').play();
            // Zoom out formContainer
            anime({
                    targets: '#formContainer',
                    opacity: 0,
                    scale: 0,
                    duration: 1000,
                    easing: 'easeInOutQuad',
                    complete: function() {
                        // ·∫®n formContainer v√† hi·ªÉn th·ªã wheelContainer
                        document.getElementById("formContainer").style.display = 'none';
                        
                        // Zoom in wheelContainer
                        anime({
                            targets: '#wheelContainer',
                            opacity: 1,
                            scale: 1,
                            duration: 1000,
                            easing: 'easeInOutQuad',
                            begin: function() {
                                document.getElementById("wheelContainer").style.display = 'block';
                            }
                        });
                    }
                });
                        // document.getElementById('formContainer').style.display = 'none';
                        // document.getElementById('wheelContainer').style.display = 'block';
                        drawWheel();
        }
        function spinWheel() {
    const canvas = document.getElementById("wheelCanvas");
    
    // **ƒê·∫∑t l·∫°i transform-origin ƒë·ªÉ quay ƒë√∫ng t√¢m**
    canvas.style.transformOrigin = "50% 50%";

    let spins = 9; // S·ªë v√≤ng quay
    let totalRotation = 360 * spins; // Quay nhi·ªÅu v√≤ng tr∆∞·ªõc khi d·ª´ng

    // Ch·ªçn ng·∫´u nhi√™n m·ªôt ph·∫ßn th∆∞·ªüng tr∆∞·ªõc khi quay
    let selectedIndex = Math.floor(Math.random() * sections.length);
    let sectionSize = 360 / sections.length;
    
    // T√≠nh to√°n g√≥c ƒë·ªÉ ph·∫ßn th∆∞·ªüng n·∫±m ·ªü h∆∞·ªõng 12 gi·ªù (270 ƒë·ªô)
    let targetAngle = 200 - (selectedIndex * sectionSize);
    if (targetAngle < 0) targetAngle += 360;

    let finalRotation = totalRotation + targetAngle;
    
    // √Åp d·ª•ng quay
    canvas.style.transition = `transform 5s ease-out`;
    canvas.style.transform = `rotate(${finalRotation}deg)`;

    setTimeout(() => {
        // Hi·ªÉn th·ªã k·∫øt qu·∫£
        // document.getElementById('wheelContainer').style.display = 'none';
        // document.getElementById('resultContainer').style.display = 'block';
        anime({
                    targets: '#wheelContainer',
                    opacity: 0,
                    scale: 0,
                    duration: 1000,
                    easing: 'easeInOutQuad',
                    complete: function() {
                        // ·∫®n formContainer v√† hi·ªÉn th·ªã wheelContainer
                        document.getElementById("wheelContainer").style.display = 'none';
                        
                        // Zoom in wheelContainer
                        anime({
                            targets: '#resultContainer',
                            opacity: 1,
                            scale: 1,
                            duration: 1000,
                            easing: 'easeInOutQuad',
                            begin: function() {
                                document.getElementById("resultContainer").style.display = 'block';
                            }
                        });
                    }
                });
        document.getElementById('prizeImage').src = sections[selectedIndex].img;
        document.getElementById('prizeRank').innerText = sections[selectedIndex].rank;
        document.getElementById('prizeName').innerText = sections[selectedIndex].name;
        // Ph√°t hi·ªáu ·ª©ng √¢m thanh ch√∫c m·ª´ng
        document.getElementById('celebrationSound').play();
    }, 6000); // Ch·ªù quay xong r·ªìi m·ªõi hi·ªÉn th·ªã
}

        function restartGame() {
            
            // document.getElementById('resultContainer').style.display = 'none';
            // document.getElementById('wheelContainer').style.display = 'block';
            anime({
                    targets: '#resultContainer',
                    opacity: 0,
                    scale: 0,
                    duration: 1000,
                    easing: 'easeInOutQuad',
                    complete: function() {
                        // ·∫®n formContainer v√† hi·ªÉn th·ªã wheelContainer
                        document.getElementById("resultContainer").style.display = 'none';
                        
                        // Zoom in wheelContainer
                        anime({
                            targets: '#wheelContainer',
                            opacity: 1,
                            scale: 1,
                            duration: 1000,
                            easing: 'easeInOutQuad',
                            begin: function() {
                                document.getElementById("wheelContainer").style.display = 'block';
                            }
                        });
                    }
                });
            // Reset transform ƒë·ªÉ tr√°nh quay ch·∫≠m
            canvas.style.transition = "none";
            canvas.style.transform = "rotate(0deg)";
            setTimeout(() => {
                canvas.style.transition = "transform 5s ease-out";
            }, 50);
        }
    </script>
</body>
</html>
